# ----------------------------------------------------------
# Author: Nandan Kumar
# Date: 11/05/2025
# Assignment-10: Secure User Model, Pydantic Validation, and Docker Testing
# File: pytest.ini
# ----------------------------------------------------------
# Description:
# Central pytest configuration file for running unit, integration,
# and end-to-end (E2E) tests. Ensures consistent discovery patterns,
# coverage reporting, and warning suppression. Designed for use
# with FastAPI, SQLAlchemy, and Docker-based test environments.
# ----------------------------------------------------------

[pytest]
# ----------------------------------------------------------
# Test Discovery Configuration
# ----------------------------------------------------------
# Location of all test files
testpaths = tests

# Naming patterns for test discovery
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# ----------------------------------------------------------
# Coverage & Output Configuration
# ----------------------------------------------------------
# Run tests with coverage for the 'app' package and generate
# both terminal and HTML reports for detailed analysis.
addopts = --cov=app --cov-report=term-missing --cov-report=html -v

# ----------------------------------------------------------
# Custom Test Markers
# ----------------------------------------------------------
# Define categories for selectively running test groups.
markers =
    slow: marks tests as slow (skip unless '--run-slow' is used)
    fast: marks tests as fast (run by default)
    e2e: marks tests as end-to-end (integration tests)

# ----------------------------------------------------------
# Warning & Logging Configuration
# ----------------------------------------------------------
# Suppress non-critical warnings to keep output clean.
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::ResourceWarning

# Optional: set logging level (uncomment for debugging)
# log_level = INFO
